<!DOCTYPE html>
<html>
<head>
    <title>ES Next</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="../assets/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/fonts.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/typography.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div class="wrapper">
  <header class="mainheader">
    <div class="logo">
      <a href=""><span class="logotext">ES Next</span></a>
    </div>
  </header>
</div>

<!-- ================== Slides ================== -->
    <textarea id="source">

class: center, middle

.title[
Front-end training
# ES Next
]

---

class: center, middle

# A History Lesson

---

# ECMA-262 timeline
--

- June 1997 - First edition of ECMAScript
--

- August 1998 - ES2, to align with ISO/IEC 16262
--

- December 1999 - ES3, added regex, try/catch and more
--

- July 2008 - ~~ES4, Abandoned due to complexity~~
--

- December 2009 - ES5, strict mode, JSON, get/set, and more
--

- June 2011 - ES5.1, to align with ISO/IEC 16262 3rd edition
--

- June 2015 - ES6/ES2015, a lot of stuff!
--

- 28 January 2016 - final feature set for ES2016
--

- 29 January 2017 - final feature set for ES2017
--

- 23-25 January 2018 - final feature set for ES2018
--

- End of January 2019 - final feature set for ES2019

---

# The TC39 process

![TC-39 meeting](assets/tc-39.png)

* [Last proposals](https://github.com/tc39/proposals/blob/master/finished-proposals.md)
* [Proposal review process](https://github.com/tc39/proposals)

---

class: center, middle

# ECMAScript 2015 is huge

---

# ECMAScript 2015

* Arrow functions
* Binary and Octal Literals
* Block-scoped variables (let / const)
* Classes
* Default + rest + spread parameters
* Destructuring
* Enhanced object literals
* Generators
* Iterators + for..of
* Map + Set + WeakMap + WeakSet

---

* new Math + Number + String + Array + Object APIs
* Modules
* Promises
* Proxies
* Reflect API
* Subclassable Built-ins
* Symbols
* Tail Calls
* Template strings
* Unicode (full support)

--

All changes can be found [here](http://es6-features.org)

---

class: center, middle

# ECMAScript 2016 even bigger

---

# ECMAScript 2016

* [Array.prototype.includes](https://github.com/tc39/Array.prototype.includes)
* [Exponentiation Operator](https://github.com/rwaldron/exponentiation-operator)

---

class: center, middle

# ECMAScript 2017

---

# ECMAScript 2017

* [Object.values/Object.entries](https://github.com/tc39/proposal-object-values-entries)
* [String padding](https://github.com/tc39/proposal-string-pad-start-end)
* [Object.getOwnPropertyDescriptors()](https://github.com/tc39/proposal-object-getownpropertydescriptors)
* [Trailing commas in function parameter lists and calls](https://github.com/tc39/proposal-trailing-function-commas)
* [Async Functions](https://github.com/tc39/ecmascript-asyncawait)

---

class: center, middle

# ECMAScript 2018

---

# ECMAScript 2018

* [Shared memory and atomics](https://github.com/tc39/ecmascript_sharedmem)
* [Lifting template literal restriction](https://github.com/tc39/proposal-template-literal-revision)
* [s (dotAll) flag for regular expressions](https://github.com/tc39/proposal-regexp-dotall-flag)
* [RegExp named capture groups](https://github.com/tc39/proposal-regexp-named-groups)
* [Rest/Spread Properties](https://github.com/tc39/proposal-object-rest-spread)
* [RegExp Lookbehind Assertions](https://github.com/tc39/proposal-regexp-lookbehind)
* [RegExp Unicode Property Escapes](https://github.com/tc39/proposal-regexp-unicode-property-escapes)
* [Promise.prototype.finally()](https://github.com/tc39/proposal-promise-finally)
* [Asynchronous Iteration](https://github.com/tc39/proposal-async-iteration)
* [Optional catch binding](https://github.com/tc39/proposal-optional-catch-binding)
* [JSON superset](https://github.com/tc39/proposal-json-superset)

---

class: center, middle

# ECMAScript 2019

---

# ECMAScript 2019

* [Symbol.prototype.description](https://github.com/tc39/proposal-Symbol-description)
* [Function.prototype.toString revision](https://github.com/tc39/Function-prototype-toString-revision)
* [Object.fromEntries](https://github.com/tc39/proposal-object-from-entries)
* [Well-formed JSON.stringify](https://github.com/tc39/proposal-well-formed-stringify)
* [String.prototype.{trimStart,trimEnd}](https://github.com/tc39/proposal-string-left-right-trim)
* [Array.prototype.{flat,flatMap}](https://github.com/tc39/proposal-flatMap)

---

# http://kangax.github.io/compat-table/es6/
or
# https://caniuse.com/#feat=es6

![kangax table](assets/kangax.jpg)

---

class: center, middle

# Let's look more closely

---

# Variable Declarations

```
console.log(variable); // ??

var variable = 10;

console.log(variable); // ??
```
--
```
console.log(variable); // ??

let variable = 10;

console.log(variable); // ??
```
--
```
{
  const variable = 5; // same scoping rules as let
  variable = variable*2; // ??
}
```
--
```
const variable = [5];
variable[0] = variable[0]*2; // ??
```

---

# Variable Declarations

```
const a = {};

a.id = 0;

console.log(a);
```
--
```
for (var i = 0; i < 5; i++) {}

console.log(i);
```
--
```
for (let j = 0; j < 5; j++) {}

console.log(j);
```

---

# String Templates

```
const world = 'World';
const str = `Hello ${world}!'}`;
```
--
```
const multiline = `
  Sir, in my heart there was a kind of fighting
  That would not let me sleep. Methought I lay
`;
```
--
```
const multiline = `
  Here can be any function ${(function(){ console.log('Hello, world!') })()}
`;
```

---
# Destructuring
Convenient syntax to extract values from objects and arrays.

```
const arr = [1, 2, 3, 4];
const [a, , b, c] = arr;

console.log(a, b, c); {{content}}
```
--
// 1, 3, 4
--
```
let obj = {e: 1, f: 2, g: 3};
let {e, f, h} = obj;

console.log(e, f, h); {{content}}
```
--
// 1, 2, undefined
---
# Spread
Convenient way to get "everything else that remains".

```
const [head, ...tail] = [1,2,3,4,5];
console.log(head, tail); {{content}}
```
--
// 1, [2, 3, 4, 5]
--
```
let {a, ...rest} = {a: 1, b: 2, c: 3};
console.log(a, rest); {{content}}
```
--
// SyntaxError: Unexpected token ... // not es2015 ðŸ˜¥,
// but added in ES2018 ðŸŽ‰ so 1, { b: 2, c: 3 }
--
```
const {...rest, foo} = obj; // SyntaxError
const {foo, ...rest1, ...rest2} = obj; // SyntaxError
```
---
# Arrow Functions
An arrow function is always bound to the scope it's defined in.
Arrow functions are always anonymous.

```
let arr = [1,2,3,4].reduce((mem, n) => { return mem + n });
console.log(arr); // 10
```
--

Shorthand
```
let localIncrementer1 = (n) => { return n + 1 };
let localIncrementer2 = (n) => n + 1;
let localIncrementer3 = n => n + 1;
```

---
# Function Parameters
Easier way to achieve named params, default params, and optional params.

```
function sum (a = 0, b = 0) {
  return a + b;
}

console.log(sum(2)); // 2
```
--
```
function sum (...vals) {
  // better than arguments!
  return vals.reduce((mem, n) => mem + n, 0);
}
console.log(sum(1, 2, 3, 4)); // 10
```
--
```
function rectArea ({ width = 5, height = 5 } = {}) {
  return width * height;
}
console.log(rectArea({height: 30})); // 150
```

---

One caveat with default function params
```
function test(a, b) {  }
```
--

test.length
--

// 2
--

```
function test(a, b = 1) {  }
```

test.length
--

// 1
--

```
function test(a = 1, b ) {  }
```

test.length
--

// 0

---
# Classes
```
class Animal {
  constructor (name, legs) {
    this.name = name;
    this.legs = legs;
  }

  describe () {
    return `${this.name} has ${this.legs} legs`;
  }
}

class Cat extends Animal {
  constructor (name) {
    super(name, 4);
  }

  describe () {
    return `${super.describe()} and says meow`;
  }
}

let cat = new Cat('Tom');
console.log(cat.describe()); // Tom has 4 legs and says meow
```

---
# Getters/Setters

```
const person = {
  age: 5,
  get myAge() {
    return this.age;
  },
  set name(name) {
    if (!name) throw new Error('I need a name');
    this._name = name
  }
}

person.myAge;
person.name = 'Tom';
```

---
# Modules
```
// imports
import React from 'react';
import { NavigationMixin as Navigation } from 'navigation';

// exports
export default MiscUtilities;
export { buildQuery as toQuery };
```

---

# Generators
Generators, a new feature of ECMAScript 2015, are functions that can be paused and resumed. This helps with
many applications: iterators, asynchronous programming, etc.

--
```
function* genFunc() {
  yield 'a';
  yield 'b';
}
```
--
```
function* objectEntries(obj) {
  const propKeys = Reflect.ownKeys(obj);

  for (const propKey of propKeys) {
    yield [propKey, obj[propKey]];
  }
}
```
--
More info here http://2ality.com/2015/03/es6-generators.html

---

# Async functions

An `async` function can contain an `await` expression that pauses the execution of the async function 
and waits for the passed `Promise`'s resolution, and then resumes the async function's execution 
and returns the resolved value.

--
```
function fetchJson(url) {
  return fetch(url)
    .then(request => request.text())
    .then(text => JSON.parse(text))
    .catch(error => console.log(`ERROR: ${error.stack}`));
}
fetchJson('https://api.github.com/users/${user}/repos').then(res => console.log(res))
```
--
```
async function fetchJson(url) {
  try {
    const request = await fetch(url);
    const text = await request.text();
    return JSON.parse(text);
  }
  catch (error) {
    console.log(`ERROR: ${error.stack}`);
  }
}
fetchJson('https://api.github.com/users/${user}/repos').then(res => console.log(res))
```
---

# Async functions

More info here:
* https://developers.google.com/web/fundamentals/primers/async-functions
* http://2ality.com/2016/02/async-functions.html

---

# Asynchronous Iteration
With ECMAScript 2015, JavaScript got built-in support for synchronously iterating over data.
But what about data that is delivered asynchronously? For example, lines of text,
read asynchronously from a file or an HTTP connection.

--
```
function* genFunc() {
  yield 'a';
  {{content}}
  yield 'b';
}
```
--
// How about some async operation here ðŸ¤” ?
--
```
function* genFunc() {
  // await somethisngAsync()
  yield 'a';
  // await somethisngAsync()
  yield 'b';
}
```
---
# Asynchronous Iteration

```
async function* asyncRandomNumbers() {
  // This is a web service that returns a random number
  const url = 'https://www.random.org/decimal-fractions/?num=1&dec=10&col=1&format=plain&rnd=new';

  while (true) {
    const response = await fetch(url);
    const text = await response.text();
    yield Number(text);
  }
}

async function example() {
  for await (const number of asyncRandomNumbers()) {
    console.log(number);
    if (number > 0.90) break;
  }
}
```

---
# Asynchronous Iteration

More info here:
* https://jakearchibald.com/2017/async-iterators-and-generators/
* http://2ality.com/2016/10/asynchronous-iteration.html

---

# New data types

--
- Symbol

```
const SOME_CONSTANT_1 = Symbol();
const SOME_CONSTANT_2 = Symbol('hello');
```

--
- Map

```
let myMap = new Map();

let keyString = 'a string';
let keyObj = {};
let keyFunc = function() {};

myMap.set(keyString, "value associated with 'a string'");
myMap.set(keyObj, 'value associated with keyObj');
myMap.set(keyFunc, 'value associated with keyFunc');

myMap.get(keyString);    // "value associated with 'a string'"
myMap.get(keyObj);       // "value associated with keyObj"
myMap.get(keyFunc);      // "value associated with keyFunc"
```

---

# New data types

--
- Set

```
let mySet = new Set();

mySet.add(1); // Set { 1 }
mySet.add(5); // Set { 1, 5 }
mySet.add(5); // Set { 1, 5 }

mySet.has(1); // true
mySet.has(3); // false
mySet.has(5);              // true
mySet.has(Math.sqrt(25));  // true
```

--
- WeakMap
- WeakSet

---

# Other changes

--
- (ES6) find, findIndex

--
- (ES6) Math.sign

--
- (ES6) startsWith, endsWith, includes

--
- (ES 2016) exponention operator

--
- (ES 2017) Object values, entries

--
- (ES 2017) trailing commas

--
- (ES 2017) async/await

--
- And other stuff. Check materials in the end to find out more!

---

# Read at home

Articles:
* http://2ality.com/2015/08/getting-started-es6.html
* http://2ality.com/2016/01/ecmascript-2016.html
* http://2ality.com/2016/02/ecmascript-2017.html
* http://2ality.com/2017/02/ecmascript-2018.html

Books:
* http://exploringjs.com/es6/
* http://exploringjs.com/es2016-es2017.html
* http://exploringjs.com/es2018-es2019/index.html

Subscribe to  http://esnextnews.com/ newsletter (it's FREE ðŸŽ‰)

---
class: center, middle

# Thank You!
### Questions?

    </textarea>
<!-- ================== End of Slides ================== -->

    <script src="../assets/js/remark-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      remark.create({
        highlightStyle: 'github',
        highlightLanguage: 'javascript',
        highlightLines: true,
        countIncrementalSlides: false
      });
    </script>
</body>
</html>
